# SWE-Agent-Node 2.0 å¢å¼ºæ¶æ„

## æ¦‚è§ˆ

SWE-Agent-Node 2.0 èåˆå››ä¸ªå‰æ²¿æ™ºèƒ½ä½“æ–¹å‘ï¼Œå®ç°è‡ªæˆ‘è¿›åŒ–èƒ½åŠ›ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SWE-Agent-Node 2.0                                â”‚
â”‚                     Self-Evolving AI Developer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Context Layer (ACE)                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  â”‚ Prompt   â”‚  â”‚ Template â”‚  â”‚ Experienceâ”‚  â”‚ Evaluator â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ Manager  â”‚  â”‚ Engine   â”‚  â”‚ Collector â”‚  â”‚          â”‚       â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                       â”‚
â”‚                                  â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Capability Layer                             â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚    â”‚
â”‚  â”‚  â”‚ Tool Factory â”‚â—€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Code Evolver â”‚                     â”‚    â”‚
â”‚  â”‚  â”‚ (Live-SWE)   â”‚         â”‚   (SICA)     â”‚                     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                       â”‚
â”‚                                  â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Learning Layer (RL Loop)                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
â”‚  â”‚  â”‚ Self         â”‚  â”‚ Attribution  â”‚  â”‚ Policy       â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ Questioner   â”‚  â”‚ Analyzer     â”‚  â”‚ Optimizer    â”‚         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                       â”‚
â”‚                                  â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Evolution Store                              â”‚    â”‚
â”‚  â”‚  â€¢ Trajectories  â€¢ Patterns  â€¢ Knowledge  â€¢ Prompts            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ¨¡å—

### 1. Context Layer (ACE) - ä¸Šä¸‹æ–‡å·¥ç¨‹å¸ˆ

**èŒè´£**: ç®¡ç†ç³»ç»Ÿæç¤ºè¯ï¼Œå®ç°å¢é‡æ›´æ–°å’Œç»éªŒæ²‰æ·€ã€‚

**ç»„ä»¶**:

| ç»„ä»¶ | åŠŸèƒ½ | å®ç°çŠ¶æ€ |
|------|------|----------|
| Prompt Manager | ç®¡ç† Prompt æ¨¡æ¿ç‰ˆæœ¬ | ğŸ”„ è®¾è®¡ä¸­ |
| Template Engine | æ¸²æŸ“åŠ¨æ€ Prompt | ğŸ”„ è®¾è®¡ä¸­ |
| Experience Collector | æ”¶é›†ä»»åŠ¡æ‰§è¡Œç»éªŒ | ğŸ”„ è®¾è®¡ä¸­ |
| Evaluator | è¯„ä¼° Prompt æ•ˆæœ | ğŸ”„ è®¾è®¡ä¸­ |

**æ•°æ®æµ**:
```
ä»»åŠ¡è¾“å…¥ â†’ Prompt Manager â†’ Template Engine â†’ Agent
                â†“
         Experience Collector â†’ Evolution Store
                â†“
              Evaluator â†’ Prompt æ›´æ–°
```

---

### 2. Capability Layer - èƒ½åŠ›æ‰©å±•å±‚

#### 2.1 Tool Factory (Live-SWE-agent)

**èŒè´£**: è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºæ–°å·¥å…·ã€‚

**ç»„ä»¶**:

| ç»„ä»¶ | åŠŸèƒ½ | å®ç°çŠ¶æ€ |
|------|------|----------|
| Synthesizer | å·¥å…·ä»£ç ç”Ÿæˆ | ğŸ”„ è®¾è®¡ä¸­ |
| Sandbox | å®‰å…¨æ‰§è¡Œç¯å¢ƒ | ğŸ”„ è®¾è®¡ä¸­ |
| Registry | å·¥å…·æ³¨å†Œä¸­å¿ƒ | ğŸ”„ è®¾è®¡ä¸­ |
| Validator | å·¥å…·éªŒè¯ | ğŸ”„ è®¾è®¡ä¸­ |

**å®‰å…¨æ¨¡å‹**:
```
å·¥å…·éœ€æ±‚ â†’ Synthesizer â†’ Sandbox (éš”ç¦»æ‰§è¡Œ)
                                â†“
                            Validator (åŠŸèƒ½æµ‹è¯•)
                                â†“
                            Registry (æ³¨å†Œ)
```

#### 2.2 Code Evolver (SICA)

**èŒè´£**: å®‰å…¨åœ°ä¿®æ”¹ Agent è‡ªèº«æºç ã€‚

**ç»„ä»¶**:

| ç»„ä»¶ | åŠŸèƒ½ | å®ç°çŠ¶æ€ |
|------|------|----------|
| Analyzer | æºç åˆ†æ | ğŸ”„ è®¾è®¡ä¸­ |
| Modifier | å®‰å…¨ä¿®æ”¹ | ğŸ”„ è®¾è®¡ä¸­ |
| Backup | å¤‡ä»½ç®¡ç† | ğŸ”„ è®¾è®¡ä¸­ |
| Rollback | å›æ»šæœºåˆ¶ | ğŸ”„ è®¾è®¡ä¸­ |

**ä¿®æ”¹æµç¨‹**:
```
æ€§èƒ½ç›‘æ§ â†’ ç“¶é¢ˆè¯†åˆ« â†’ Analyzer â†’ Modifier
                                       â†“
                                   Backup (åˆ›å»º)
                                       â†“
                                   Tests (éªŒè¯)
                                       â†“
                                   Deploy (éƒ¨ç½²) / Rollback (å›æ»š)
```

---

### 3. Learning Layer (RL Loop) - å¼ºåŒ–å­¦ä¹ å¾ªç¯

**èŒè´£**: é€šè¿‡è‡ªæˆ‘æé—®å’Œå½’å› å®ç°è‡ªä¸»è®­ç»ƒã€‚

**ç»„ä»¶**:

| ç»„ä»¶ | åŠŸèƒ½ | å®ç°çŠ¶æ€ |
|------|------|----------|
| Self Questioner | ç”Ÿæˆæ¢ç´¢æ€§é—®é¢˜ | ğŸ”„ è®¾è®¡ä¸­ |
| Environment | RL ç¯å¢ƒå°è£… | ğŸ”„ è®¾è®¡ä¸­ |
| Attribution Analyzer | ç»†ç²’åº¦å½’å›  | ğŸ”„ è®¾è®¡ä¸­ |
| Policy Optimizer | ç­–ç•¥ä¼˜åŒ– | ğŸ”„ è®¾è®¡ä¸­ |

**è®­ç»ƒå¾ªç¯**:
```
State â†’ Self Questioner â†’ Action â†’ Environment â†’ Reward
                                                      â†“
                                        Attribution Analyzer
                                                      â†“
                                        Policy Optimizer â†’ New Policy
```

---

### 4. Evolution Store - è¿›åŒ–å­˜å‚¨

**èŒè´£**: æŒä¹…åŒ–æ‰€æœ‰è¿›åŒ–æ•°æ®ã€‚

**æ•°æ®ç»“æ„**:
```typescript
interface EvolutionStore {
  // è½¨è¿¹è®°å½•
  trajectories: {
    id: string;
    task: Task;
    actions: Action[];
    outcome: Outcome;
    timestamp: Date;
  }[];
  
  // å­¦åˆ°çš„æ¨¡å¼
  patterns: {
    id: string;
    type: 'success' | 'failure' | 'optimization';
    trigger: string;
    action: string;
    outcome: string;
    confidence: number;
  }[];
  
  // çŸ¥è¯†åº“
  knowledge: {
    id: string;
    category: string;
    problem: string;
    solution: string;
    effectiveness: number;
  }[];
  
  // Prompt å†å²
  prompts: {
    id: string;
    version: string;
    content: string;
    performance: number;
    createdAt: Date;
  }[];
}
```

---

## æ¨¡å—é—´äº¤äº’

### å®Œæ•´å·¥ä½œæµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ä»»åŠ¡   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Context Layer (ACE)                                 â”‚
â”‚     â€¢ è§£æä»»åŠ¡                                           â”‚
â”‚     â€¢ é€‰æ‹©åˆé€‚çš„ Prompt æ¨¡æ¿                             â”‚
â”‚     â€¢ æ³¨å…¥ç›¸å…³ç»éªŒ                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Agent Core                                          â”‚
â”‚     â€¢ ä½¿ç”¨å½“å‰ Prompt æ‰§è¡Œä»»åŠ¡                          â”‚
â”‚     â€¢ è°ƒç”¨å·²æœ‰å·¥å…·                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚                  â”‚
                       â–¼                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ 3a. Tool Factory    â”‚  â”‚ 3b. Code Evolver    â”‚
         â”‚    (å¦‚éœ€æ–°å·¥å…·)     â”‚  â”‚    (å¦‚éœ€ä¿®æ”¹æºç )   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 4. Learning Layer (RL Loop)      â”‚
              â”‚    â€¢ è‡ªæˆ‘æé—®                     â”‚
              â”‚    â€¢ å½’å› åˆ†æ                     â”‚
              â”‚    â€¢ ç­–ç•¥ä¼˜åŒ–                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 5. Evolution Store               â”‚
              â”‚    â€¢ è®°å½•è½¨è¿¹                     â”‚
              â”‚    â€¢ æå–æ¨¡å¼                     â”‚
              â”‚    â€¢ æ›´æ–°çŸ¥è¯†åº“                   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 6. Feedback to Context Layer     â”‚
              â”‚    â€¢ æ›´æ–° Prompt æ¨¡æ¿            â”‚
              â”‚    â€¢ æ²‰æ·€ç»éªŒ                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é…ç½®ç³»ç»Ÿ

### å…¨å±€é…ç½®

```yaml
# swe-agent-2.0.yaml
version: "2.0.0"

# ACE é…ç½®
context_engineer:
  enabled: true
  prompt_templates_dir: "./prompts"
  max_prompt_length: 8000
  evolution_interval: 100  # æ¯ 100 ä¸ªä»»åŠ¡åè¯„ä¼° Prompt
  
# Tool Factory é…ç½®
tool_factory:
  enabled: true
  sandbox:
    timeout: 5000
    max_memory: 128MB
    allowed_apis:
      - fetch
      - console
  auto_register: true
  
# Code Evolver é…ç½®
code_evolver:
  enabled: false  # é»˜è®¤å…³é—­ï¼Œéœ€è¦äººå·¥å¯ç”¨
  risk_threshold: "medium"
  require_approval: true
  backup_retention: 30  # ä¿ç•™ 30 å¤©çš„å¤‡ä»½
  
# RL Loop é…ç½®
rl_loop:
  enabled: true
  epsilon: 0.1  # 10% æ¢ç´¢ç‡
  learning_rate: 0.001
  batch_size: 32
  reward_weights:
    task_success: 10.0
    code_quality: 2.0
    efficiency: 1.0
    safety: -2.0

# Evolution Store é…ç½®
evolution_store:
  path: "./evolution-store"
  max_trajectories: 10000
  max_patterns: 1000
```

---

## API è®¾è®¡

### Context Engineer API

```typescript
class ContextEngineer {
  // è·å–å½“å‰ Prompt
  getPrompt(task: Task): Promise<Prompt>;
  
  // æ›´æ–° Prompt æ¨¡æ¿
  updateTemplate(section: string, content: string): Promise<void>;
  
  // è¯„ä¼° Prompt æ•ˆæœ
  evaluatePrompt(promptId: string): Promise<EvaluationResult>;
  
  // è·å–ç›¸å…³ç»éªŒ
  getRelevantExperience(task: Task): Promise<Experience[]>;
}
```

### Tool Factory API

```typescript
class ToolFactory {
  // åˆæˆæ–°å·¥å…·
  synthesizeTool(requirement: ToolRequirement): Promise<Tool>;
  
  // æ³¨å†Œå·¥å…·
  registerTool(name: string, tool: Tool): void;
  
  // åˆ—å‡ºæ‰€æœ‰å·¥å…·
  listTools(): Tool[];
  
  // éªŒè¯å·¥å…·å®‰å…¨æ€§
  validateTool(code: string): ValidationResult;
}
```

### Code Evolver API

```typescript
class CodeEvolver {
  // åˆ†ææ”¹è¿›æœºä¼š
  analyzeImprovementOpportunities(): Promise<ImprovementOpportunity[]>;
  
  // æäº¤ä¿®æ”¹
  submitModification(mod: CodeModification): Promise<ModificationResult>;
  
  // å›æ»š
  rollback(backupId: string): Promise<void>;
  
  // è·å–ä¿®æ”¹å†å²
  getModificationHistory(): Modification[];
}
```

### RL Loop API

```typescript
class RLLoop {
  // å¼€å§‹è®­ç»ƒå›åˆ
  startEpisode(task: Task): Promise<EpisodeResult>;
  
  // è·å–å½’å› åˆ†æ
  getAttribution(trajectoryId: string): Promise<Attribution[]>;
  
  // æ›´æ–°ç­–ç•¥
  updatePolicy(attributions: Attribution[]): Promise<void>;
  
  // è·å–å½“å‰ç­–ç•¥æ€§èƒ½
  getPolicyPerformance(): PolicyPerformance;
}
```

---

## éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Production                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Agent      â”‚  â”‚   Context    â”‚  â”‚   Evolution  â”‚     â”‚
â”‚  â”‚   Instance   â”‚  â”‚   Service    â”‚  â”‚   Store      â”‚     â”‚
â”‚  â”‚   (Stateless)â”‚  â”‚   (Stateful) â”‚  â”‚   (Database) â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â”‚                                â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                     â”‚  Message    â”‚                        â”‚
â”‚                     â”‚   Queue     â”‚                        â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç›‘æ§å’Œå¯è§‚æµ‹æ€§

### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | æè¿° | ç›®æ ‡ |
|------|------|------|
| `task_success_rate` | ä»»åŠ¡æˆåŠŸç‡ | > 80% |
| `prompt_effectiveness` | Prompt æ•ˆæœåˆ†æ•° | > 0.85 |
| `tool_creation_success` | å·¥å…·åˆ›å»ºæˆåŠŸç‡ | > 90% |
| `code_modification_safety` | ä»£ç ä¿®æ”¹å®‰å…¨æ€§ | 100% |
| `rl_reward_average` | RL å¹³å‡å¥–åŠ± | æŒç»­æå‡ |

### æ—¥å¿—ç»“æ„

```json
{
  "timestamp": "2026-02-24T03:39:00Z",
  "level": "INFO",
  "module": "context_engineer",
  "event": "prompt_updated",
  "data": {
    "prompt_id": "system-main",
    "old_version": "2.0.0",
    "new_version": "2.1.0",
    "improvement": 0.12
  }
}
```

---

## å®‰å…¨è€ƒè™‘

### å¤šå±‚é˜²æŠ¤

1. **ä»£ç å±‚**: TypeScript ç±»å‹æ£€æŸ¥ + ESLint
2. **å·¥å…·å±‚**: æ²™ç®±éš”ç¦» + API ç™½åå•
3. **ä¿®æ”¹å±‚**: å¤‡ä»½ + å›æ»š + äººå·¥å®¡æ‰¹
4. **è®­ç»ƒå±‚**: å®‰å…¨çº¦æŸ + çº¢é˜Ÿæµ‹è¯•

### å®¡è®¡æ—¥å¿—

æ‰€æœ‰å…³é”®æ“ä½œéƒ½è®°å½•å®¡è®¡æ—¥å¿—ï¼š
- Prompt æ›´æ–°
- å·¥å…·åˆ›å»º
- ä»£ç ä¿®æ”¹
- ç­–ç•¥æ›´æ–°

---

## ä¸‹ä¸€æ­¥

1. **å®ç° ACE PoC** (ä¼˜å…ˆçº§ P0)
2. **è®¾è®¡ Tool Factory è¯¦ç»†è§„æ ¼** (ä¼˜å…ˆçº§ P1)
3. **æ„å»º RL ç¯å¢ƒåŸå‹** (ä¼˜å…ˆçº§ P2)
4. **è¯„ä¼° Code Evolver é£é™©** (ä¼˜å…ˆçº§ P3)

---

*æ¶æ„ç‰ˆæœ¬: 2.0.0*
*åˆ›å»ºæ—¥æœŸ: 2026-02-24*
*ç»´æŠ¤è€…: SWE-Agent-Node Team*
